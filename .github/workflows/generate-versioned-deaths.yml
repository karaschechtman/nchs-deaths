name: generate-versioned-deaths
run-name: Generate versioned deaths data run no. ${{ github.run_number }}$
on:
	schedule:
		- cron: '30 0 * * *'

jobs:
	build:
		runs-on: ubuntu-latest
		steps:
			- name: checkout repo content
			  uses: actions/checkout@v2

			- name: setup python
			  uses: action/setup-python@v4
			  with:
				python-version: '3.8'

			- name: install python packages
			  run: |
				python -m pip install --upgrade pip
				pip install -r requirements.txt

			- name: execute py script
			  env: 
				S3: ${{ secrets.S3 }}
			  run: python generate_versioned_deaths.py

